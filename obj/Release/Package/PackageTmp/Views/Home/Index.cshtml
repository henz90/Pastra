@model List<Pastra.Models.Card>
@using System.Linq

@{
    ViewBag.Title = "Home Page";
}

<script src="~/Content/JavaScript.js"></script>

<div class="content float-start">
    <div class="rounded-pill">
        @if (ViewBag.Complete)
        {
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="center">
                            <h2 class="center">
                                Player Score:
                            </h2>
                        </td>
                        <td class="center">
                            <h2 class="center">
                                @ViewBag.PlayerScore
                            </h2>
                        </td>
                        <td class="center">
                            <h2 class="center">
                                Opponent Score:
                            </h2>
                        </td>
                        <td class="center">
                            <h2 class="center">
                                @ViewBag.OpponentScore
                            </h2>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h2 class="center">
                                Cards Collected:
                            </h2>
                        </td>
                        <td>
                            <h2 class="center">
                                @Enumerable.Count(ViewBag.playerCollected)
                            </h2>
                        </td>
                        <td>
                            <h2 class="center">
                                Cards Collected:
                            </h2>
                        </td>
                        <td>
                            <h2 class="center">
                                @Enumerable.Count(ViewBag.opponentCollected)
                            </h2>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            @foreach (Pastra.Models.Card card in ViewBag.playerCollected)
                            {
                                <img src="~/Resources/@card.Image" id="@card.ID" class="card @(card.Pastra > 0 ? "pastra" : "") @(card.Points > 0 ? "points" : "")" />
                            }
                        </td>
                        <td colspan="2">
                            @foreach (Pastra.Models.Card card in ViewBag.opponentCollected)
                            {
                                <img src="~/Resources/@card.Image" id="@card.ID" class="card @(card.Pastra > 0 ? "pastra" : "") @(card.Points > 0 ? "points" : "")" />
                            }
                        </td>
                    </tr>
                </tbody>
            </table>
        }
        else
        {
            <div class="float-start opponentCollected">
                <img src="~/Resources/gray_back.png" class="card" />
            </div>
            <div class="opponentHand">
                @foreach (Pastra.Models.Card card in ViewBag.OpponentHand)
                {
                    <img src="~/Resources/red_back.png" class="card" />
                }
                @*<img src="~/Resources/@card.Image" class="card" />*@
            </div>

            <br />
            <div class="float-start">
                <img src="~/Resources/red_back.png" class="card" />
            </div>
            <div class="float-start board">
                @foreach (Pastra.Models.Card card in ViewBag.Board)
                {
                    <img src="~/Resources/@card.Image" id="@card.ID" class="inplay card @((int)card.Value)" />
                }
            </div>
            <div class="clear"></div>
            <br />
            <div class="float-start playerCollected">
                <img src="~/Resources/gray_back.png" class="card" />
            </div>
            <div class="playerHand">
                @foreach (Pastra.Models.Card card in Model)
                {
                    <a href="@Url.Action("Index/" + @card.ID)" onclick="return false;">
                        <img src="~/Resources/@card.Image" id="@card.ID" onclick="handClick(@((int)card.Value), @card.ID)" class="card" />
                    </a>
                }
            </div>
        }
    </div>
</div>

@if (ViewBag.OpponentLastPlayed != null && ViewBag.OpponentLastPlayed.Count != 1)
{
    <div class="content float-start">
        <table class="table table-sm table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>
                        <h2>
                            Opponent Plays
                        </h2>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        @foreach (Pastra.Models.Card card in ViewBag.OpponentLastPlayed)
                        {
                            if (card == ViewBag.OpponentLastPlayed[0])
                            {
                                <h2>Played: </h2>
                                <img src="~/Resources/@card.Image" id="@card.ID" class="card @(card.Pastra > 0 ? "pastra" : "")" />
                                if (ViewBag.OpponentLastPlayed.Count > 1)
                                {
                                    <h2>Collected: </h2>
                                }
                            }
                            else
                            {
                                <img src="~/Resources/@card.Image" id="@card.ID" class="card"/>
                            }
                        }
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
}



